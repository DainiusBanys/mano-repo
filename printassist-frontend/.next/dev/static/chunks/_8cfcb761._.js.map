{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Coding/mano-repo/printassist-frontend/components/ProtectedRoute.tsx"],"sourcesContent":["// components/ProtectedRoute.tsx\r\n\r\n'use client';\r\n\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useRouter } from 'next/navigation';\r\nimport { ReactNode, useEffect } from 'react';\r\n\r\ninterface ProtectedRouteProps {\r\n    children: ReactNode;\r\n}\r\n\r\nexport const ProtectedRoute: React.FC<ProtectedRouteProps> = ({ children }) => {\r\n    const { isAuthenticated, token } = useAuth();\r\n    const router = useRouter();\r\n\r\n    useEffect(() => {\r\n        // This runs once on mount and whenever isAuthenticated or token changes\r\n        if (typeof window !== 'undefined' && !isAuthenticated) {\r\n            // Check localStorage as a fallback, then redirect\r\n            const storedToken = localStorage.getItem('token');\r\n            if (!storedToken) {\r\n                // User is NOT logged in. Send them to the login page.\r\n                router.replace('/login');\r\n            }\r\n        }\r\n    }, [isAuthenticated, router, token]);\r\n\r\n    // If not authenticated, we display nothing while redirecting to avoid flickering.\r\n    if (!isAuthenticated) {\r\n        return <div className=\"min-h-screen flex items-center justify-center\">Loading authentication...</div>;\r\n    }\r\n\r\n    // If authenticated, render the children (the actual dashboard content)\r\n    return <>{children}</>;\r\n};"],"names":[],"mappings":"AAAA,gCAAgC;;;;;;AAIhC;AACA;AACA;;;AAJA;;;;AAUO,MAAM,iBAAgD,CAAC,EAAE,QAAQ,EAAE;;IACtE,MAAM,EAAE,eAAe,EAAE,KAAK,EAAE,GAAG,IAAA,qIAAO;IAC1C,MAAM,SAAS,IAAA,kJAAS;IAExB,IAAA,0KAAS;oCAAC;YACN,wEAAwE;YACxE,IAAI,+CAAkB,eAAe,CAAC,iBAAiB;gBACnD,kDAAkD;gBAClD,MAAM,cAAc,aAAa,OAAO,CAAC;gBACzC,IAAI,CAAC,aAAa;oBACd,sDAAsD;oBACtD,OAAO,OAAO,CAAC;gBACnB;YACJ;QACJ;mCAAG;QAAC;QAAiB;QAAQ;KAAM;IAEnC,kFAAkF;IAClF,IAAI,CAAC,iBAAiB;QAClB,qBAAO,6LAAC;YAAI,WAAU;sBAAgD;;;;;;IAC1E;IAEA,uEAAuE;IACvE,qBAAO;kBAAG;;AACd;GAvBa;;QAC0B,qIAAO;QAC3B,kJAAS;;;KAFf"}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///D:/Coding/mano-repo/printassist-frontend/components/NormalizerInterface.tsx"],"sourcesContent":["// components/NormalizerInterface.tsx\r\n\r\n'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport axios from 'axios';\r\n\r\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL;\r\n\r\ninterface NormalizedResult {\r\n    raw: string;\r\n    cleaned: string;\r\n    structure: {\r\n        names: string[];\r\n        dates: string[];\r\n        message: string | null;\r\n    };\r\n}\r\n\r\nconst NormalizerInterface: React.FC = () => {\r\n    const { token, isAuthenticated, user } = useAuth();\r\n    const [rawInput, setRawInput] = useState('');\r\n    const [result, setResult] = useState<NormalizedResult | null>(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n\r\n    const handleProcess = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setError('');\r\n        setResult(null);\r\n\r\n        if (!rawInput.trim()) {\r\n            setError('Please enter personalization data.');\r\n            return;\r\n        }\r\n\r\n        if (!isAuthenticated || !token) {\r\n            setError('Authentication error. Please log in again.');\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n\r\n        try {\r\n            // Include JWT token in the request header\r\n            const response = await axios.post(\r\n                `${API_BASE_URL}/normalizer/process`,\r\n                { rawInput },\r\n                {\r\n                    headers: {\r\n                        Authorization: `Bearer ${token}`,\r\n                    },\r\n                }\r\n            );\r\n\r\n            setResult(response.data.result);\r\n\r\n        } catch (err) {\r\n            if (axios.isAxiosError(err) && err.response) {\r\n                // Catches the 403 Forbidden error from your backend paywall\r\n                setError(err.response.data.msg || 'Processing failed.');\r\n            } else {\r\n                setError('A network or server error occurred.');\r\n            }\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"mt-8 max-w-4xl mx-auto\">\r\n            <h2 className=\"text-3xl font-semibold mb-6 text-gray-800\">1. Data Normalization Tool</h2>\r\n\r\n            {!user?.isSubscribed && (\r\n                <div className=\"mb-6 p-4 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700\">\r\n                    <p className=\"font-bold\">Access Warning:</p>\r\n                    <p>Your current status is **Trialing**. This tool is protected by the subscription paywall.</p>\r\n                </div>\r\n            )}\r\n\r\n            <form onSubmit={handleProcess} className=\"mb-8 p-6 bg-white shadow-lg rounded-lg\">\r\n                <label htmlFor=\"rawInput\" className=\"block text-lg font-medium text-gray-700 mb-2\">\r\n                    Paste Raw Personalization Data (e.g., \"Name are Max and Shadow. Dates must be 2021-Present\")\r\n                </label>\r\n                <textarea\r\n                    id=\"rawInput\"\r\n                    rows={4}\r\n                    value={rawInput}\r\n                    onChange={(e) => setRawInput(e.target.value)}\r\n                    className=\"w-full px-3 py-2 text-gray-700 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n                    placeholder=\"Enter customer input here...\"\r\n                    required\r\n                />\r\n\r\n                <button\r\n                    type=\"submit\"\r\n                    disabled={loading}\r\n                    className=\"mt-4 w-full py-3 px-4 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 disabled:opacity-50\"\r\n                >\r\n                    {loading ? 'Processing...' : 'Normalize Data'}\r\n                </button>\r\n            </form>\r\n\r\n            {error && (\r\n                <div className=\"p-4 mb-4 bg-red-100 border-l-4 border-red-500 text-red-700\">\r\n                    <p className=\"font-bold\">Error:</p>\r\n                    <p>{error}</p>\r\n                </div>\r\n            )}\r\n\r\n            {result && (\r\n                <div className=\"p-6 bg-green-50 shadow-lg rounded-lg border border-green-300\">\r\n                    <h3 className=\"text-2xl font-semibold mb-3 text-green-700\">âœ… Normalized Output:</h3>\r\n\r\n                    <div className=\"bg-white p-3 rounded mb-4 shadow-sm\">\r\n                        <p className=\"text-sm text-gray-600 mb-1\">Cleaned String (Ready for Print):</p>\r\n                        <p className=\"text-lg font-mono text-gray-900 border-dashed border-2 p-2\">{result.cleaned}</p>\r\n                    </div>\r\n\r\n                    <h4 className=\"text-lg font-medium mb-2\">Structured Data:</h4>\r\n                    <ul className=\"space-y-1 text-gray-800\">\r\n                        <li><strong>Names:</strong> {result.structure.names.join(', ')}</li>\r\n                        <li><strong>Dates:</strong> {result.structure.dates.join(', ') || 'N/A'}</li>\r\n                        <li><strong>Raw Input:</strong> <em className=\"text-gray-500\">{result.raw}</em></li>\r\n                    </ul>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NormalizerInterface;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 371, "column": 0}, "map": {"version":3,"sources":["file:///D:/Coding/mano-repo/printassist-frontend/app/dashboard/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { ProtectedRoute } from '@/components/ProtectedRoute';\r\nimport NormalizerInterface from '@/components/NormalizerInterface'; // <--- NEW IMPORT\r\n\r\n// The core component containing the dashboard content\r\nconst DashboardContent = () => {\r\n    const { user, logout } = useAuth();\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-100 p-8\">\r\n            <header className=\"flex justify-between items-center mb-6 max-w-4xl mx-auto\">\r\n                <h1 className=\"text-3xl font-bold text-indigo-700\">PrintAssist AI Dashboard</h1>\r\n                <div className=\"flex items-center space-x-4\">\r\n                    <p className=\"text-gray-600\">Logged in as: <span className=\"font-semibold\">{user?.email}</span></p>\r\n                    <button\r\n                        onClick={logout}\r\n                        className=\"py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700\"\r\n                    >\r\n                        Log Out\r\n                    </button>\r\n                </div>\r\n            </header>\r\n\r\n            <section className=\"mb-8 max-w-4xl mx-auto p-4 bg-white shadow-md rounded-lg\">\r\n                <h2 className=\"text-xl font-semibold mb-2\">Account Status:</h2>\r\n                <p>Your subscription is currently:\r\n                    <span className={`font-extrabold ${user?.isSubscribed ? 'text-green-600' : 'text-yellow-600'}`}>\r\n                        {user?.isSubscribed ? ' ACTIVE' : ' TRIALING / CANCELED'}\r\n                    </span>\r\n                </p>\r\n            </section>\r\n\r\n            {/* INTEGRATE THE CORE TOOL */}\r\n            <NormalizerInterface />\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\n// The page component uses the ProtectedRoute wrapper\r\nexport default function DashboardPage() {\r\n    return (\r\n        <ProtectedRoute>\r\n            <DashboardContent />\r\n        </ProtectedRoute>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA,+OAAoE,kBAAkB;;;AAJtF;;;;AAMA,sDAAsD;AACtD,MAAM,mBAAmB;;IACrB,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,IAAA,qIAAO;IAEhC,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAO,WAAU;;kCACd,6LAAC;wBAAG,WAAU;kCAAqC;;;;;;kCACnD,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAE,WAAU;;oCAAgB;kDAAc,6LAAC;wCAAK,WAAU;kDAAiB,MAAM;;;;;;;;;;;;0CAClF,6LAAC;gCACG,SAAS;gCACT,WAAU;0CACb;;;;;;;;;;;;;;;;;;0BAMT,6LAAC;gBAAQ,WAAU;;kCACf,6LAAC;wBAAG,WAAU;kCAA6B;;;;;;kCAC3C,6LAAC;;4BAAE;0CACC,6LAAC;gCAAK,WAAW,CAAC,eAAe,EAAE,MAAM,eAAe,mBAAmB,mBAAmB;0CACzF,MAAM,eAAe,YAAY;;;;;;;;;;;;;;;;;;0BAM9C,6LAAC,gJAAmB;;;;;;;;;;;AAIhC;GAhCM;;QACuB,qIAAO;;;KAD9B;AAmCS,SAAS;IACpB,qBACI,6LAAC,kJAAc;kBACX,cAAA,6LAAC;;;;;;;;;;AAGb;MANwB"}},
    {"offset": {"line": 520, "column": 0}, "map": {"version":3,"sources":["file:///D:/Coding/mano-repo/printassist-frontend/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0]}}]
}